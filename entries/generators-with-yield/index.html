<!doctype html><html><head><meta charset=utf-8></head><body><aside><ul><li><a href=https://boehrsi.github.io/implementation-details-flutter/categories/async/>Async</a></li><li><a href=https://boehrsi.github.io/implementation-details-flutter/categories/bloc/>Bloc</a></li><li><a href=https://boehrsi.github.io/implementation-details-flutter/categories/quality/>Quality</a></li></ul></aside><nav><div class=logo><a href=https://boehrsi.github.io/implementation-details-flutter/>implementationDetails()</a></div><input type=checkbox id=toggle-nav onclick=toggleScrollingOnMobileNavigation()>
<label for=toggle-nav class=toggle-nav-button><i class=material-icons>menu</i></label><ul><li><a href=https://boehrsi.github.io/implementation-details-flutter//about>About</a></li><li><a href=https://boehrsi.github.io/implementation-details-flutter//contribute>Contribute</a></li><li class=category-header>Categories</li><li class=category-entry><a href=https://boehrsi.github.io/implementation-details-flutter/categories/async/>Async</a></li><li class=category-entry><a href=https://boehrsi.github.io/implementation-details-flutter/categories/bloc/>Bloc</a></li><li class=category-entry><a href=https://boehrsi.github.io/implementation-details-flutter/categories/quality/>Quality</a></li></ul></nav><main><div class=breadcrumbs><div><a href=https://boehrsi.github.io/implementation-details-flutter//categories/async>Async</a>
<a href=https://boehrsi.github.io/implementation-details-flutter//categories/bloc>Bloc</a></div></div><article class="card column-one"><div><header><h1>Generators with yield*</h1></header><p class=sub-title>Last updated: 12.09.2020 - 16:00 by Boehrsi</p><p>Generator functions in Dart are pretty useful, but it&rsquo;s important to use them the right way. It&rsquo;s required to use the <code>yield*</code> prefix for related method calls, as without the function won&rsquo;t be called at all.<br>This leads to malfunctions and is also quite hard to debug, as it&rsquo;s not obvious (no errors are thrown).</p><div class=links><h4>Related links:</h4><ul><li><a href=https://dart.dev/guides/language/language-tour#generators>https://dart.dev/guides/language/language-tour#generators</a></li></ul></div></div></article><div><article class="card column-one"><div><header><h1>DO prefix async generator functions with yield*</h1></header><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart>Stream<span style=color:#f92672>&lt;</span>State<span style=color:#f92672>&gt;</span> mapEventToState(Event event) <span style=color:#66d9ef>async</span><span style=color:#f92672>*</span> {
    <span style=color:#66d9ef>yield</span><span style=color:#f92672>*</span> _requestData(event.id); <span style=color:#75715e>// Good
</span><span style=color:#75715e></span>}

Stream<span style=color:#f92672>&lt;</span>State<span style=color:#f92672>&gt;</span> _requestData(<span style=color:#66d9ef>int</span> id) <span style=color:#66d9ef>async</span><span style=color:#f92672>*</span> {
    <span style=color:#66d9ef>final</span> data <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> dataRepository.load(chatId);
    <span style=color:#66d9ef>yield</span> DataLoaded(data: data);
}
</code></pre></div></div></article><article class="card column-one"><div><header><h1>DON'T forget the prefixing</h1></header><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart>Stream<span style=color:#f92672>&lt;</span>State<span style=color:#f92672>&gt;</span> mapEventToState(Event event) <span style=color:#66d9ef>async</span><span style=color:#f92672>*</span> {
    _requestData(event.id); <span style=color:#75715e>// Bad, as this won&#39;t work and no error is thrown
</span><span style=color:#75715e></span>}

Stream<span style=color:#f92672>&lt;</span>State<span style=color:#f92672>&gt;</span> _requestData(<span style=color:#66d9ef>int</span> id) <span style=color:#66d9ef>async</span><span style=color:#f92672>*</span> {
    <span style=color:#66d9ef>final</span> data <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> dataRepository.load(chatId);
    <span style=color:#66d9ef>yield</span> DataLoaded(data: data);
}
</code></pre></div></div></article></div></main><footer><a href=#>Imprint</a></footer><link rel=stylesheet type=text/css href=https://boehrsi.github.io/implementation-details-flutter/scss/style.min.378520cbc68a02c51c94827b7beef7f30af692c9d2b55b306dabbce907058ba5.css integrity="sha256-N4Ugy8aKAsUclIJ7e+738wr2ksnStVswbau86QcFi6U="><link rel=stylesheet type=text/css href=https://boehrsi.github.io/implementation-details-flutter//css/material-icons.css><script type=text/javascript src=https://boehrsi.github.io/implementation-details-flutter//js/base.js></script></body></html>